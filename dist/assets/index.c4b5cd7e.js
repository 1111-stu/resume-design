import{d as t,o as e,c as o,a as l,y as a,a4 as s,_ as i,X as n,A as p,u as m,e as r,W as x,t as c,F as u,j as d,Q as f,ak as g,f as h,p as v,Y as S,x as E,Z as T,z as F,i as C,n as I,q as _,B as N,C as b}from"./@vue.2f07ec52.js";import{_ as O,P as W}from"./PreviewImage.59db4f89.js";import{_ as z,u as y,a as j,b as L,c as R,p as B,T as D}from"./index.66553763.js";import{d as A}from"./vuedraggable.7f0566f4.js";import{l as P}from"./lodash.9a4b4219.js";import{h as M}from"./html2canvas.c4a43e03.js";import{J as k}from"./jspdf.1d58ee56.js";import{s as J}from"./pinia.144cc524.js";import{u as U,b as V}from"./vue-router.1fa85672.js";import{d as w}from"./c-scrollbar.409fc4e1.js";import{s as G}from"./vue3-pdfjs.21d748aa.js";import"./element-plus.bc463900.js";import"./lodash-es.032e1c7e.js";import"./@vueuse.7ecd16a9.js";import"./@element-plus.21c32065.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./dayjs.0371a6c7.js";import"./async-validator.ed4c92a2.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./@floating-ui.1ef3caef.js";import"./colorpicker-v3.9786f840.js";import"./moment.17f8281e.js";import"./pdfjs-dist.207706dd.js";import"./dommatrix.4ee1d507.js";import"./web-streams-polyfill.e202f7fa.js";import"./vue.c7f6a9e2.js";import"./sortablejs.fbe5cdec.js";const K={class:"title"};var X=z(t({props:{title:{default:"模块选择"}},setup:t=>(s,i)=>(e(),o("div",K,[l("h1",null,a(t.title),1)]))}),[["__scopeId","data-v-6d5f1d98"]]);const H={class:"model-list-box"},Y={class:"model-ul"},$=["onClick"],Z={class:"left"},q={class:"icon-box"},Q={class:"right"};var tt=z(t({setup(t){const{resumeJsonStore:r}=y(),x=j(),c=()=>{},u=()=>{};return(t,d)=>{const f=s("svg-icon"),g=s("el-switch");return e(),o("div",H,[l("div",Y,[i(m(A),{list:m(r).LIST,itemKey:"id","ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:c,onEnd:u},{item:n((({element:t,index:e})=>[l("div",{class:p(["model-list-item",{active:m(x).id===t.id}]),onClick:e=>(t=>{let e=L(`${r.NAME}-${t.model}`),o={model:t.model,optionsName:e,title:t.title,id:t.id};x.setResumeModel(o)})(t)},[l("div",Z,[l("div",q,[i(f,{iconName:t.iconfont,className:"icon",color:"#c4c4c4",size:"16px"},null,8,["iconName"])]),l("p",null,a(t.title),1)]),l("div",Q,[i(g,{modelValue:t.show,"onUpdate:modelValue":e=>t.show=e,size:"small","active-color":"#00C091"},null,8,["modelValue","onUpdate:modelValue"])])],10,$)])),_:1},8,["list"])])])}}}),[["__scopeId","data-v-64cfa209"]]);var et=z(t({setup(t){const{resumeJsonStore:l}=y(),a=R(),p=B(l.MODEL_MARGIN_TOP),d=r(p),f=t=>{l.MODEL_MARGIN_TOP=t+"px",l.LIST.forEach((t=>{t.style.mTop=l.MODEL_MARGIN_TOP}))},g=B(l.MODEL_MARGIN_BOTTOM),h=r(g),v=t=>{l.MODEL_MARGIN_BOTTOM=t+"px",l.LIST.forEach((t=>{t.style.mBottom=l.MODEL_MARGIN_BOTTOM}))};return(t,p)=>{const r=s("el-option"),g=s("el-select"),S=s("el-form-item"),E=s("color-picker"),T=s("el-input-number"),F=s("el-form");return e(),x(F,{"label-width":"100px","label-position":"left"},{default:n((()=>[i(S,{label:"标题字体大小:"},{default:n((()=>[i(g,{modelValue:m(l).TITLE_FONT_SIZE,"onUpdate:modelValue":p[0]||(p[0]=t=>m(l).TITLE_FONT_SIZE=t),class:"m-2",placeholder:"Select"},{default:n((()=>[(e(!0),o(u,null,c(m(a),((t,o)=>(e(),x(r,{key:o,label:t,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(S,{label:"标题字体颜色:"},{default:n((()=>[i(E,{rgba:m(l).TITLE_COLOR,"onUpdate:rgba":p[1]||(p[1]=t=>m(l).TITLE_COLOR=t)},null,8,["rgba"])])),_:1}),i(S,{label:"模块上外边距:"},{default:n((()=>[i(T,{modelValue:d.value,"onUpdate:modelValue":p[2]||(p[2]=t=>d.value=t),min:-100,max:100,onChange:f},null,8,["modelValue"])])),_:1}),i(S,{label:"模块下外边距:"},{default:n((()=>[i(T,{modelValue:h.value,"onUpdate:modelValue":p[3]||(p[3]=t=>h.value=t),min:-100,max:100,onChange:v},null,8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-b243ada4"]]);let ot={template1:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#121c26",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:500,textFontWeight:500,textColor:"#7c7b7b",mBottom:"50px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#666",textFontSize:"14px",textFontWeight:600,mBottom:"35px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"}},template2:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#121c26",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:500,textFontWeight:500,textColor:"#fff",mBottom:"50px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"35px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#fff",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"35px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"}}};const lt=t=>(N("data-v-d4b96966"),t=t(),b(),t),at={class:"design-box"},st={class:"nav-box"},it={class:"nav-center"},nt={class:"draft-tips"},pt={class:"nav-right"},mt=E("全局样式设置"),rt=E("保存草稿"),xt=E("导出PDF"),ct=E("重置"),ut={class:"bottom"},dt={class:"left"},ft={class:"center"},gt=lt((()=>l("p",{class:"tips"},"如果分割线遮挡内容，请通过调整模块上下边距以显示内容！",-1))),ht={class:"page"},vt={class:"config"};var St=z(t({setup(t){const{title:p}=J(j()),N=y();let{resumeJsonStore:b}=J(y());const z=C().appContext.config.globalProperties.$moment,L=t=>{let e=JSON.parse(JSON.stringify(t));return e.LIST.map(((t,o)=>{t.style||(t.style=ot[b.value.NAME][t.model]),e.LIST[o]=t})),e},R=localStorage.getItem("resumeDraft"),B=U(),{id:A,name:K}=B.query;b.value.ID=A,b.value.NAME=K;const H=r(K);if(R){let t=JSON.parse(R)[A];if(t)t=L(t),N.changeResumeJsonData(t);else{D.ID=A,D.NAME=K;let t=L(D);N.changeResumeJsonData(t)}}else{D.ID=A,D.NAME=K;let t=L(D);N.changeResumeJsonData(t)}if(2==Number(A)){let t=[];b.value.LIST.forEach((e=>{"RESUME_TITLE"==e.model&&(e.show=!1),t.push(e)})),b.value.LIST=t}const Y=V(),$=()=>{Y.push({path:"/"})},Z=r(null),q=r(!1),Q=()=>{q.value=!0,Z.value.focus()},lt=()=>{q.value=!1};d((async()=>{At()})),f((()=>{null==Rt||Rt.disconnect()})),g((()=>{Nt=[]}));let St=r("");const Et=()=>{let t=b.value.ID,e={},o=localStorage.getItem("resumeDraft");o?(e=JSON.parse(o),e[t]=b.value):e[t]=b.value,localStorage.setItem("resumeDraft",JSON.stringify(e));const l=z(new Date).format("YYYY.MM.DD HH:mm:ss");St.value=`已自动保存草稿  ${l}`},Tt=P.exports.debounce((()=>{Et()}),1e3);h(b.value,(()=>{Tt()}),{deep:!0});const Ft=j(),Ct=()=>{Ft.$reset()},It=()=>{Et()},_t=r(null);let Nt=[];const bt=()=>{let t=L(D);N.changeResumeJsonData(t);let e=localStorage.getItem("resumeDraft");if(e){let t=JSON.parse(e);Object.keys(t).length>1?t[A]&&(delete t[A],localStorage.setItem("resumeDraft",JSON.stringify(t))):localStorage.removeItem("resumeDraft")}location.reload()},Ot=async()=>{let t=Dt.value;Dt.value=0,Ft.$reset(),await I(),((t,e,o,l)=>{let a=t.offsetWidth,s=t.offsetHeight,i=t.offsetTop,n=t.offsetLeft,p=document.createElement("canvas"),m=0,r=document.documentElement.clientWidth||document.body.clientWidth,x=window.innerWidth;x>r&&(m=(x-r)/2),p.width=2*a,p.height=2*s;let c=p.getContext("2d");c.scale(2,2),c.translate(-n-m,-i),M(t,{scale:2,useCORS:!0,logging:!1}).then((t=>{let a=t.width,s=t.height,i=a/592.28*841.89,n=s,p=0,m=595.28,r=595.28/a*s,x=t.toDataURL("image/jpeg",1),c=new k("","pt","a4");if(n<i)c.addImage(x,"JPEG",0,0,m,r);else for(;n>0;)c.addImage(x,"JPEG",0,p,m,r),n-=i,p-=841.89,n>0&&c.addPage();if(o){let t=c.output("datauristring");l(t)}else c.save(e),l()}))})(_t.value,"个人简历",!1,(()=>{Dt.value=t}))},Wt=r(""),zt=r(0),yt=r(!1),jt=()=>{yt.value=!1},Lt=r(null);let Rt=null,Bt=0,Dt=r(0);const At=()=>{Rt=new ResizeObserver((async t=>{for(let e of t)Bt=e.target.offsetHeight,Dt.value=Math.ceil(Bt/1160),_t.value.style.height=1160*Dt.value+"px",Lt.value.style.height=_t.value.style.height})),Rt.observe(Lt.value)},Pt=t=>{Lt.value.style.height=t+"px"};return(t,r)=>{const d=s("Edit"),f=s("el-icon"),g=s("el-input"),h=s("el-button"),C=s("el-popconfirm");return e(),o(u,null,[l("div",at,[l("nav",st,[l("div",{class:"nav-left"},[l("img",{src:O,alt:"logo",srcset:"",onClick:$}),l("span",{onClick:$},"化简")]),l("div",it,[l("span",nt,a(m(St)),1),v(l("p",null,[E(a(m(b).TITLE)+" ",1),i(f,{size:20,color:"#409eff",onClick:Q},{default:n((()=>[i(d)])),_:1})],512),[[S,!q.value]]),v(i(g,{ref_key:"titleIpf",ref:Z,modelValue:m(b).TITLE,"onUpdate:modelValue":r[0]||(r[0]=t=>m(b).TITLE=t),autofocus:"",placeholder:"请输入标题",onBlur:lt},null,8,["modelValue"]),[[S,q.value]])]),l("div",pt,[i(h,{type:"primary",onClick:Ct},{default:n((()=>[mt])),_:1}),i(h,{type:"primary",onClick:It},{default:n((()=>[rt])),_:1}),i(h,{type:"primary",onClick:Ot},{default:n((()=>[xt])),_:1}),i(C,{title:"重置会删除所有已编辑内容，是否继续?",onConfirm:bt,confirmButtonText:"确定",cancelButtonText:"取消"},{reference:n((()=>[i(h,{type:"primary"},{default:n((()=>[ct])),_:1})])),_:1})])]),l("div",ut,[l("div",dt,[i(m(w.exports.CScrollbar),{trigger:"hover",hThumbStyle:{"background-color":"rgba(0,0,0,0.4)"}},{default:n((()=>[i(X),i(tt)])),_:1},8,["hThumbStyle"])]),l("div",ft,[l("div",{class:"design",ref_key:"html2Pdf",ref:_t},[l("div",{class:"design-content",ref_key:"htmlContentPdf",ref:Lt},[(e(),x(T(H.value),{onContentHeightChange:Pt}))],512),m(Dt)>0?(e(!0),o(u,{key:0},c(m(Dt),((t,s)=>(e(),o("div",{class:"lines",ref_for:!0,ref:t=>((t,e)=>{t&&(Dt.value===e+1&&(t.style.top=1160*Dt.value+"px"),Nt.push(t))})(t,s),style:_({top:1128+1132*s+"px"})},[gt,l("p",ht,a(s+1)+"/"+a(m(Dt)),1)],4)))),256)):F("",!0)],512)]),l("div",vt,[i(X,{title:m(p)},null,8,["title"]),m(Ft).model?(e(),x(T(m(Ft).optionsName),{key:m(Ft).id})):(e(),x(et,{key:1}))])])]),v(i(W,{onClose:jt},{default:n((()=>[(e(!0),o(u,null,c(zt.value,(t=>(e(),x(m(G),{key:t,src:Wt.value,page:t,scale:.5},null,8,["src","page","scale"])))),128))])),_:1},512),[[S,yt.value]])],64)}}}),[["__scopeId","data-v-d4b96966"]]);export{St as default};
