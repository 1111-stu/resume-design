var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(t,o,l)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l,i=(e,i)=>{for(var n in i||(i={}))o.call(i,n)&&a(e,n,i[n]);if(t)for(var n of t(i))l.call(i,n)&&a(e,n,i[n]);return e};import{b as n,k as s,d as r,e as m,f as p,g as c,h as d,p as x,s as u,o as f,t as S,l as h,j as g}from"./element-plus.9cb0d13d.js";import{_ as T,a as E,u as v,b as L,c as C,d as F,p as b,g as _,i as I,T as N}from"./index.1301833d.js";import{d as z,e as B,o as O,c as y,l as W,X as A,a as k,t as R,Y as j,Z as w,$ as U,q as P,x as V,u as D,i as J,a2 as G,F as Y,m as M,p as K,f as X,K as H,L as $,aX as q,_ as Z,U as Q,n as ee,y as te,z as oe}from"./@vue.1091902c.js";import{h as le}from"./moment.17f8281e.js";import{d as ae}from"./vuedraggable.10ff3c97.js";import{h as ie}from"./html2canvas.c4a43e03.js";import{J as ne}from"./jspdf.6fa4f0a9.js";import{d as se,s as re}from"./pinia.81a72ff6.js";import{u as me,b as pe}from"./vue-router.1d6983da.js";import{d as ce}from"./c-scrollbar.fa594b62.js";import{_ as de}from"./logo.9e1f78c9.js";import{F as xe}from"./file-saver.57d3682f.js";import{V as ue}from"./vue-codemirror.01b160ac.js";import{F as fe,G as Se,H as he}from"./@codemirror.01a039cd.js";import{l as ge}from"./lodash.85068fef.js";import"./dayjs.b9a89834.js";import"./@element-plus.dc4747fe.js";import"./lodash-es.b0ae9094.js";import"./@vueuse.7b0e6305.js";import"./async-validator.ed4c92a2.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./vue-uuid.5db441ec.js";import"./colorpicker-v3.08ea740a.js";import"./vue.b4cbd91f.js";import"./sortablejs.54f2c4a0.js";import"./codemirror.14d39394.js";import"./@lezer.c02d00a2.js";import"./crelt.67277586.js";import"./style-mod.a2e40363.js";import"./w3c-keyname.86620924.js";var Te=T(z({props:{title:{default:"模块选择"},showCollapse:{type:Boolean}},emits:["unflodOrCollapse"],setup(e,{emit:t}){const o=B("收起"),l=B(!0),a=B(null),i=()=>{l.value?(o.value="展开",l.value=!1,a.value.style.transform="rotate(180deg)"):(o.value="收起",l.value=!0,a.value.style.transform="rotate(0deg)"),t("unflodOrCollapse",l.value)};return(t,s)=>{const r=E,m=n;return O(),y("div",{class:V(["title",{"collapse-center":!l.value}])},[W(k("h1",null,R(e.title),513),[[A,l.value]]),e.showCollapse?(O(),j(m,{key:0,class:"box-item",effect:"dark",content:o.value},{default:w((()=>[k("div",{class:"unfold-collapse-box",onClick:i,ref_key:"switchRef",ref:a},[U(r,{iconName:"icon-shouqi",color:"#00c091",size:"24px"})],512)])),_:1},8,["content"])):P("",!0)],2)}}}),[["__scopeId","data-v-b60f3d38"]]);const Ee={class:"model-list-box"},ve={class:"model-ul"},Le=["onClick"],Ce={class:"left"},Fe={class:"right"};var be=T(z({props:{leftShowStatus:null},setup(e){const{resumeJsonStore:t}=v(),o=L(),l=()=>{},a=()=>{};return(i,r)=>{const m=E,p=n,c=s;return O(),y("div",Ee,[k("div",ve,[U(D(ae),{list:D(t).LIST,itemKey:"id","ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:l,onEnd:a},{item:w((({element:l,index:a})=>[k("div",{class:V(["model-list-item",{active:D(o).id===l.id},{"collapse-center":!e.leftShowStatus}]),onClick:e=>(e=>{let l=C(`${t.NAME}-${e.model}`),a={model:e.model,optionsName:l,title:e.title,id:e.id};o.setResumeModel(a)})(l)},[k("div",Ce,[k("div",{class:V(["icon-box",{"collapse-size":!e.leftShowStatus}])},[U(p,{class:"box-item",placement:"right",effect:"dark",content:l.title,disabled:e.leftShowStatus},{default:w((()=>[U(m,{iconName:l.iconfont,className:"icon",color:e.leftShowStatus?"#c4c4c4":"#00c091",size:"16px"},null,8,["iconName","color"])])),_:2},1032,["content","disabled"])],2),W(k("p",null,R(l.title),513),[[A,e.leftShowStatus]])]),W(k("div",Fe,[U(c,{modelValue:l.show,"onUpdate:modelValue":e=>l.show=e,size:"small","active-color":"#00C091"},null,8,["modelValue","onUpdate:modelValue"])],512),[[A,e.leftShowStatus]])],10,Le)])),_:1},8,["list"])])])}}}),[["__scopeId","data-v-789a2599"]]);const _e={class:"resume-theme-box"};var Ie=T(z({setup(e){const{resumeJsonStore:t}=v(),o=F(),l=J([100,200,300,400,500,600,700,800,900]),a=e=>{t.LIST.forEach((t=>{"BASE_INFO"!==t.model&&(t.style.titleFontSize=e)}))},i=e=>{t.LIST.forEach((t=>{t.style.textFontSize=e}))},n=e=>{t.LIST.forEach((t=>{t.style.titleColor=e.hex}))},s=e=>{t.LIST.forEach((t=>{t.style.textColor=e.hex}))},x=e=>{t.LIST.forEach((t=>{t.style.titleFontWeight=e}))},u=e=>{t.LIST.forEach((t=>{t.style.textFontWeight=e}))},f=b(t.GLOBAL_STYLE.modelMarginTop),S=B(f),h=e=>{t.GLOBAL_STYLE&&(t.GLOBAL_STYLE.modelMarginTop=e+"px"),t.LIST.forEach((e=>{e.style.mTop=t.GLOBAL_STYLE.modelMarginTop}))},g=b(t.GLOBAL_STYLE.modelMarginBottom),T=B(g),E=e=>{t.GLOBAL_STYLE&&(t.GLOBAL_STYLE.modelMarginBottom=e+"px"),t.LIST.forEach((e=>{e.style.mBottom=t.GLOBAL_STYLE.modelMarginBottom}))};return(e,f)=>{const g=G("color-picker"),v=m,L=p,C=c,F=r,b=d;return O(),y("div",_e,[U(b,{"label-width":"120px","label-position":"left"},{default:w((()=>[U(v,{label:"主题颜色:"},{default:w((()=>[U(g,{rgba:D(t).GLOBAL_STYLE.themeColor,"onUpdate:rgba":f[0]||(f[0]=e=>D(t).GLOBAL_STYLE.themeColor=e)},null,8,["rgba"])])),_:1}),U(v,{label:"模块标题字体大小:"},{default:w((()=>[U(C,{modelValue:D(t).GLOBAL_STYLE.firstTitleFontSize,"onUpdate:modelValue":f[1]||(f[1]=e=>D(t).GLOBAL_STYLE.firstTitleFontSize=e),class:"m-2",placeholder:"Select"},{default:w((()=>[(O(!0),y(Y,null,M(D(o),((e,t)=>(O(),j(L,{key:t,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),U(v,{label:"二级标题字体大小:"},{default:w((()=>[U(C,{modelValue:D(t).GLOBAL_STYLE.secondTitleFontSize,"onUpdate:modelValue":f[2]||(f[2]=e=>D(t).GLOBAL_STYLE.secondTitleFontSize=e),class:"m-2",placeholder:"Select",onChange:a},{default:w((()=>[(O(!0),y(Y,null,M(D(o),((e,t)=>(O(),j(L,{key:t,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),U(v,{label:"正文字体大小:"},{default:w((()=>[U(C,{modelValue:D(t).GLOBAL_STYLE.textFontSize,"onUpdate:modelValue":f[3]||(f[3]=e=>D(t).GLOBAL_STYLE.textFontSize=e),class:"m-2",placeholder:"Select",onChange:i},{default:w((()=>[(O(!0),y(Y,null,M(D(o),((e,t)=>(O(),j(L,{key:t,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),U(v,{label:"二级标题颜色:"},{default:w((()=>[U(g,{rgba:D(t).GLOBAL_STYLE.secondTitleColor,"onUpdate:rgba":f[4]||(f[4]=e=>D(t).GLOBAL_STYLE.secondTitleColor=e),onChange:n},null,8,["rgba"])])),_:1}),U(v,{label:"正文字体颜色:"},{default:w((()=>[U(g,{rgba:D(t).GLOBAL_STYLE.textFontColor,"onUpdate:rgba":f[5]||(f[5]=e=>D(t).GLOBAL_STYLE.textFontColor=e),onChange:s},null,8,["rgba"])])),_:1}),U(v,{label:"二级标题字体粗细:"},{default:w((()=>[U(C,{modelValue:D(t).GLOBAL_STYLE.secondTitleWeight,"onUpdate:modelValue":f[6]||(f[6]=e=>D(t).GLOBAL_STYLE.secondTitleWeight=e),class:"m-2",placeholder:"Select",onChange:x},{default:w((()=>[(O(!0),y(Y,null,M(D(l),((e,t)=>(O(),j(L,{key:t,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),U(v,{label:"正文字体粗细:"},{default:w((()=>[U(C,{modelValue:D(t).GLOBAL_STYLE.textFontWeight,"onUpdate:modelValue":f[7]||(f[7]=e=>D(t).GLOBAL_STYLE.textFontWeight=e),class:"m-2",placeholder:"Select",onChange:u},{default:w((()=>[(O(!0),y(Y,null,M(D(l),((e,t)=>(O(),j(L,{key:t,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),U(v,{label:"模块上外边距:"},{default:w((()=>[U(F,{modelValue:S.value,"onUpdate:modelValue":f[8]||(f[8]=e=>S.value=e),min:-100,max:100,onChange:h},null,8,["modelValue"])])),_:1}),U(v,{label:"模块下外边距:"},{default:w((()=>[U(F,{modelValue:T.value,"onUpdate:modelValue":f[9]||(f[9]=e=>T.value=e),min:-100,max:100,onChange:E},null,8,["modelValue"])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-238e6dbc"]]);let Ne={TITLE:"我的简历",LIST:[{model:"RESUME_TITLE",title:"我的简历"},{model:"BASE_INFO",title:"基本资料",name:"小猪课堂",age:25,address:"四川成都",avatar:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",workService:3,phoneNumber:"028-1234321",email:"12322233@qq.com",abstract:"我是一个没有感情的工作机器",degree:"本科"},{model:"JOB_INTENTION",title:"求职意向",intendedPositions:"前端开发工程师",intendedCity:"成都",expectSalary:"8000-10000",jobStatus:"随时入职",jobSearchType:"求职类型"},{model:"EDU_BACKGROUND",title:"教育背景",LIST:[{date:["2015-5","2019-6"],schoolName:"野鸡大学",specialized:"通信工程",degree:"本科",majorCourse:"主修计算机技术、Java、c++等等"}]},{model:"SKILL_SPECIALTIES",title:"技能特长",LIST:[{skillName:"JavaScript",proficiency:"了解",introduce:"熟练掌握该项技术"}]},{model:"CAMPUS_EXPERIENCE",title:"校园经历",LIST:[{date:["2021-9","2022-10"],campusBriefly:"经历简要，如社团名称",campusDuty:"主要职责",campusContent:"经历描述"}]},{model:"INTERNSHIP_EXPERIENCE",title:"实习经验",LIST:[{date:["2021-9","2022-10"],companyName:"业绩公司",posts:"前端开发工程师",jobContent:[{content:"主要工作内容是打杂"}]}]},{model:"WORK_EXPERIENCE",title:"工作经验",LIST:[{date:["2021-9","2022-10"],companyName:"业绩公司",posts:"前端开发工程师",jobContent:[{content:"主要工作内容是打杂"}]}]},{model:"PROJECT_EXPERIENCE",title:"项目经验",LIST:[{date:["2021-9","2022-10"],projectName:"项目名称",posts:"前端开发工程师",projectContent:[{content:"该项目是一个打杂项目"}]}]},{model:"AWARDS",title:"荣誉奖项",LIST:[{date:"2021-9",awardsName:"奖项名称",awardsGrade:"获奖等级"}]},{model:"HOBBIES",title:"兴趣爱好",content:"我喜欢打杂我喜欢打杂我喜欢打杂我喜欢打杂我喜欢打杂我喜欢打杂我喜欢打杂我喜欢打杂"},{model:"SELF_EVALUATION",title:"自我评价",content:"我是一个没有责任感的人"},{model:"WORKS_DISPLAY",title:"作品展示",LIST:[{worksName:"作品名称",worksLink:"https://www.baidu.com",worksIntroduce:"这是一个千万级作品"}]}]},ze={template1:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#121c26",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:500,textFontWeight:500,textColor:"#7c7b7b",mBottom:"50px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#666",textFontSize:"14px",textFontWeight:600,mBottom:"35px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},GLOBAL_STYLE:{themeColor:"#000",firstTitleFontSize:"20px",secondTitleFontSize:"14px",textFontSize:"14px",secondTitleColor:"#666",textFontColor:"#757575",secondTitleWeight:600,textFontWeight:500,modelMarginTop:"0px",modelMarginBottom:"45px"}},template2:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#121c26",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:500,textFontWeight:500,textColor:"#fff",mBottom:"50px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"35px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#fff",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"35px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},GLOBAL_STYLE:{themeColor:"#000",firstTitleFontSize:"20px",secondTitleFontSize:"14px",textFontSize:"14px",secondTitleColor:"#666",textFontColor:"#757575",secondTitleWeight:600,textFontWeight:500,modelMarginTop:"0px",modelMarginBottom:"45px"}},template3:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#fff",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:400,textFontWeight:500,textColor:"#757575",mBottom:"40px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"30px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"30px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},GLOBAL_STYLE:{themeColor:"#079cfa",firstTitleFontSize:"20px",secondTitleFontSize:"14px",textFontSize:"14px",secondTitleColor:"#666",textFontColor:"#757575",secondTitleWeight:600,textFontWeight:500,modelMarginTop:"0px",modelMarginBottom:"45px"}}};const Be=e=>{let{resumeJsonStore:t}=v(),o=ge.exports.cloneDeep(ze),l=JSON.parse(JSON.stringify(e));return l.LIST.map(((e,a)=>{e.style||(e.style=o[t.NAME][e.model]),l.LIST[a]=e})),l.GLOBAL_STYLE=o[t.NAME].GLOBAL_STYLE,l},Oe=se("uuidStore",{state:()=>({refreshUuid:_()}),actions:{setUuid(){this.refreshUuid=_()}}}),ye={class:"code-mirror-box"},We={class:"dialog-footer"},Ae=K("关闭"),ke=z({props:{tipDialogVisible:{type:Boolean,default:!1}},emits:["closeTipDialog"],setup(e,{emit:t}){const o=B(JSON.stringify(Ne,null,4)),l=[fe(),Se()],a=()=>{t("closeTipDialog")};return(t,i)=>{const n=x,s=u;return O(),j(s,{"model-value":e.tipDialogVisible,width:"40%",title:"示例JSON","show-close":!1,"close-on-click-modal":!1,"append-to-body":"","custom-class":"import-json"},{footer:w((()=>[k("span",We,[U(n,{type:"primary",onClick:a},{default:w((()=>[Ae])),_:1})])])),default:w((()=>[k("div",ye,[U(D(ue),{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=e=>o.value=e),ref:"codemirrorRef",placeholder:"请将你的简历JSON写在此处～～",style:{height:"400px"},autofocus:!0,"indent-with-tab":!0,tabSize:2,extensions:l,disabled:!0},null,8,["modelValue"])])])),_:1},8,["model-value"])}}});const Re={class:"header"},je={class:"header-left"},we=k("h1",{class:"title"},"请在编辑器内输入简历JSON数据，格式如下：",-1),Ue=K(" 注意：示例中的所有字段都需要保留，若无值为空即可，不可删除字段！ "),Pe={class:"header-right"},Ve={class:"code-mirror-box"},De={class:"dialog-footer"},Je=K("取消"),Ge=K("确定"),Ye=z({props:{dialogVisible:{type:Boolean,default:!1}},emits:["cancle"],setup(e,{emit:t}){const o=B(JSON.stringify(Ne,null,4)),l=[fe(),he,Se()],a=()=>{t("cancle")},s=B(!1),r=()=>{s.value=!0},m=()=>{s.value=!1},p=()=>{o.value=JSON.stringify(Ne,null,4),f({message:"重置成功！",type:"success",center:!0})},c=Oe(),d=me(),S=v(),h=L(),g=()=>{if(!o.value)return void f({message:"数据不能为空！",type:"error",center:!0});if(!I(o.value))return void f({message:"JSON格式不正确！",type:"error",center:!0});let e=JSON.parse(o.value);const{id:l,name:a}=d.query;e.ID=l,e.NAME=a;for(let t=0;t<e.LIST.length;t++)for(let o=0;o<N.LIST.length;o++)N.LIST[o].model===e.LIST[t].model&&(e.LIST[t]=i(i({},N.LIST[o]),e.LIST[t]));const n=Be(e);S.changeResumeJsonData(n),c.setUuid(),h.$reset(),t("cancle")};return(t,i)=>{const c=E,d=n,f=x,S=u;return O(),y(Y,null,[U(S,{"model-value":e.dialogVisible,width:"60%","show-close":!1,"close-on-click-modal":!1,"append-to-body":"","custom-class":"import-json"},{title:w((()=>[k("div",Re,[k("div",je,[we,k("span",null,[U(c,{iconName:"icon-xianshi_jinggao",color:"red",size:"14px"}),Ue])]),k("div",Pe,[U(d,{class:"box-item",effect:"dark",content:"JSON示例",placement:"bottom"},{default:w((()=>[k("div",{class:"icon-box",onClick:r},[U(c,{iconName:"icon-daimashili",color:"#fff",size:"17px"})])])),_:1}),U(d,{class:"box-item",effect:"dark",content:"重置",placement:"bottom"},{default:w((()=>[k("div",{class:"icon-box",onClick:p},[U(c,{iconName:"icon-zhongzhi",color:"#fff",size:"17px"})])])),_:1})])])])),footer:w((()=>[k("span",De,[U(f,{onClick:a},{default:w((()=>[Je])),_:1}),U(f,{type:"primary",onClick:g},{default:w((()=>[Ge])),_:1})])])),default:w((()=>[k("div",Ve,[U(D(ue),{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=e=>o.value=e),placeholder:"请将你的简历JSON写在此处～～",style:{height:"400px"},autofocus:!0,"indent-with-tab":!0,tabSize:2,extensions:l},null,8,["modelValue"])])])),_:1},8,["model-value"]),U(ke,{tipDialogVisible:s.value,onCloseTipDialog:m},null,8,["tipDialogVisible"])],64)}}});const Me={class:"nav-box"},Ke={class:"nav-center"},Xe={class:"draft-tips"},He={class:"nav-right"},$e=z({emits:["generateReport","reset","saveDataToLocal"],setup(e,{emit:t}){let{resumeJsonStore:o}=re(v());const l=pe(),a=()=>{l.push({path:"/"})},i=B(null),s=B(!1),r=()=>{s.value=!0,i.value.focus()},m=()=>{s.value=!1};let p=B("");const c=()=>{let e=o.value.ID,t={},l=localStorage.getItem("resumeDraft");l?(t=JSON.parse(l),t[e]=o.value):t[e]=o.value,localStorage.setItem("resumeDraft",JSON.stringify(t));const a=le(new Date).format("YYYY.MM.DD HH:mm:ss");p.value=`已自动保存草稿  ${a}`},d=()=>{c(),f({message:"保存草稿成功!",type:"success",center:!0})},x=ge.exports.debounce((()=>{c()}),1e3);X(o.value,(()=>{x()}),{deep:!0});const u=()=>{const e=JSON.stringify(o.value),t=new Blob([e],{type:""});xe.saveAs(t,o.value.TITLE+".json")},T=()=>{t("generateReport")},L=()=>{S.confirm("此操作会重置简历至初始状态，是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{t("reset"),p.value=""})).catch((()=>{}))},C=B(!1),F=()=>{C.value=!0},b=()=>{C.value=!1};return(e,t)=>{const l=G("Edit"),c=h,x=g,f=E,S=n;return O(),y(Y,null,[k("nav",Me,[k("div",{class:"nav-left"},[k("img",{src:de,alt:"logo",srcset:"",onClick:a}),k("span",{onClick:a},"化简")]),k("div",Ke,[k("span",Xe,R(D(p)),1),W(k("p",null,[K(R(D(o).TITLE)+" ",1),U(c,{size:20,color:"#409eff",onClick:r},{default:w((()=>[U(l)])),_:1})],512),[[A,!s.value]]),W(U(x,{ref_key:"titleIpf",ref:i,modelValue:D(o).TITLE,"onUpdate:modelValue":t[0]||(t[0]=e=>D(o).TITLE=e),autofocus:"",placeholder:"请输入标题",onBlur:m},null,8,["modelValue"]),[[A,s.value]])]),k("div",He,[U(S,{class:"box-item",effect:"dark",content:"保存草稿",placement:"bottom"},{default:w((()=>[k("div",{class:"icon-box",onClick:d},[U(f,{iconName:"icon-caogaoxiang1",color:"#fff",size:"17px"})])])),_:1}),U(S,{class:"box-item",effect:"dark",content:"导出为PDF",placement:"bottom"},{default:w((()=>[k("div",{class:"icon-box",onClick:T},[U(f,{iconName:"icon-pdf",color:"#fff",size:"17px"})])])),_:1}),U(S,{class:"box-item",effect:"dark",content:"导出为JSON数据",placement:"bottom"},{default:w((()=>[k("div",{class:"icon-box",onClick:u},[U(f,{iconName:"icon-xiazai",color:"#fff",size:"17px"})])])),_:1}),U(S,{class:"box-item",effect:"dark",content:"导入JSON数据",placement:"bottom"},{default:w((()=>[k("div",{class:"icon-box",onClick:F},[U(f,{iconName:"icon-yunduanshangchuan",color:"#fff",size:"19px"})])])),_:1}),U(S,{class:"box-item",effect:"dark",content:"重置所有设置",placement:"bottom"},{default:w((()=>[k("div",{class:"icon-box",onClick:L},[U(f,{iconName:"icon-zhongzhi",color:"#fff",size:"17px"})])])),_:1})])]),U(Ye,{dialogVisible:C.value,onCancle:b},null,8,["dialogVisible"])],64)}}});const qe={class:"design-box"},Ze={class:"bottom"},Qe=(e=>(te("data-v-12be5371"),e=e(),oe(),e))((()=>k("p",{class:"tips"},"如果分割线遮挡内容，请通过调整模块上下边距以显示内容！",-1))),et={class:"page"};var tt=T(z({setup(e){const{title:t}=re(L()),o=v(),l=Oe();let{resumeJsonStore:a}=re(v());const i=()=>{N.ID=r,N.NAME=m;let e=Be(N);o.changeResumeJsonData(e)},n=localStorage.getItem("resumeDraft"),s=me(),{id:r,name:m}=s.query;a.value.ID=r,a.value.NAME=m;const p=B(m);if(n){let e=JSON.parse(n)[r];e?o.changeResumeJsonData(e):i()}else i();if(2==Number(r)){let e=[];a.value.LIST.forEach((t=>{"RESUME_TITLE"==t.model&&(t.show=!1),e.push(t)})),a.value.LIST=e}H((async()=>{F(),_()})),$((()=>{null==T||T.disconnect()})),q((()=>{u=[]}));const c=L(),d=()=>{c.$reset()},x=B(null);let u=[];const S=async()=>{i(),d();let e=localStorage.getItem("resumeDraft");if(e){let t=JSON.parse(e);Object.keys(t).length>1?t[r]&&(delete t[r],localStorage.setItem("resumeDraft",JSON.stringify(t))):localStorage.removeItem("resumeDraft")}f({message:"重置成功!",type:"success",center:!0}),l.setUuid(),await Q(),F()},h=async()=>{let e=C.value;C.value=0,c.$reset(),await Q(),((e,t,o,l)=>{let a=e.offsetWidth,i=e.offsetHeight,n=e.offsetTop,s=e.offsetLeft,r=document.createElement("canvas"),m=0,p=document.documentElement.clientWidth||document.body.clientWidth,c=window.innerWidth;c>p&&(m=(c-p)/2),r.width=2*a,r.height=2*i;let d=r.getContext("2d");d.scale(2,2),d.translate(-s-m,-n),ie(e,{scale:2,useCORS:!0,logging:!1}).then((e=>{let a=e.width,i=e.height,n=a/592.28*841.89,s=i,r=0,m=595.28,p=595.28/a*i,c=e.toDataURL("image/jpeg",1),d=new ne("","pt","a4");if(s<n)d.addImage(c,"JPEG",0,0,m,p);else for(;s>0;)d.addImage(c,"JPEG",0,r,m,p),s-=n,r-=841.89,s>0&&d.addPage();if(o){let e=d.output("datauristring");l(e)}else d.save(t),l()}))})(x.value,a.value.TITLE,!1,(()=>{C.value=e}))},g=B(null);let T=null,E=0,C=B(0);const F=()=>{T=new ResizeObserver((async e=>{for(let t of e)E=t.target.offsetHeight,C.value=Math.ceil(E/1160),x.value.style.height=1160*C.value+"px",g.value.style.height=x.value.style.height})),T.observe(g.value)},b=e=>{g.value.style.height=e+"px"},_=()=>{window.addEventListener("click",I)},I=e=>{z(g.value,e.target)&&d()},z=(e,t)=>!(!e||e===document)&&(e===t||z(e.parentNode,t));$((()=>{window.removeEventListener("click",I)}));const W=B(null),A=B(!0),V=e=>{e?(setTimeout((()=>{A.value=e}),100),W.value.style.width="300px"):(setTimeout((()=>{A.value=e}),100),W.value.style.width="70px")};return(e,o)=>(O(),y("div",qe,[U($e,{onGenerateReport:h,onReset:S}),k("div",Ze,[k("div",{class:"left",ref_key:"leftRef",ref:W},[U(D(ce.exports.CScrollbar),{trigger:"hover",hThumbStyle:{"background-color":"rgba(0,0,0,0.4)"}},{default:w((()=>[U(Te,{onUnflodOrCollapse:V,showCollapse:""}),(O(),j(be,{leftShowStatus:A.value,key:D(l).refreshUuid},null,8,["leftShowStatus"]))])),_:1},8,["hThumbStyle"])],512),(O(),y("div",{class:"center",key:D(l).refreshUuid},[k("div",{class:"design",ref_key:"html2Pdf",ref:x},[k("div",{class:"design-content",ref_key:"htmlContentPdf",ref:g},[(O(),j(Z(p.value),{onContentHeightChange:b}))],512),D(C)>0?(O(!0),y(Y,{key:0},M(D(C),((e,t)=>(O(),y("div",{class:"lines",ref_for:!0,ref:e=>((e,t)=>{e&&(C.value===t+1&&(e.style.top=1160*C.value+"px"),u.push(e))})(e,t),style:ee({top:1128+1132*t+"px"})},[Qe,k("p",et,R(t+1)+"/"+R(D(C)),1)],4)))),256)):P("",!0)],512)])),(O(),y("div",{class:"config",key:D(l).refreshUuid},[U(Te,{title:D(t)},null,8,["title"]),D(c).model?(O(),j(Z(D(c).optionsName),{key:D(c).id})):(O(),j(Ie,{key:1}))]))])]))}}),[["__scopeId","data-v-12be5371"]]);export{tt as default};
