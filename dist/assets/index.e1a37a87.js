var t=Object.defineProperty,e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(e,o,l)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[o]=l,i=(t,i)=>{for(var s in i||(i={}))o.call(i,s)&&a(t,s,i[s]);if(e)for(var s of e(i))l.call(i,s)&&a(t,s,i[s]);return t};import{a as s,j as n,d as r,e as m,c as p,f as c,g as d,o as x,s as u,n as f,t as S,k as g,i as h}from"./element-plus.dd2b8ce4.js";import{_ as E,a as v,u as T,b as C,c as F,d as L,p as I,g as b,i as N,T as _,o as y}from"./index.9306716d.js";import{d as z,e as O,o as B,c as W,m as A,Y as j,a as R,x as k,W as w,X as D,_ as P,y as J,z as U,u as M,a4 as V,q as Y,F as G,t as K,j as X,Q as H,ak as $,f as q,Z as Q,n as Z,p as tt,A as et,B as ot}from"./@vue.400cde23.js";import{h as lt}from"./moment.17f8281e.js";import{d as at}from"./vuedraggable.9e9ac958.js";import{l as it}from"./lodash.e0473d21.js";import{h as st}from"./html2canvas.c4a43e03.js";import{J as nt}from"./jspdf.76187c9d.js";import{d as rt,s as mt}from"./pinia.6cef6b80.js";import{u as pt,b as ct}from"./vue-router.a9498a4b.js";import{d as dt}from"./c-scrollbar.f0ced9d1.js";import{_ as xt}from"./logo.9e1f78c9.js";import{F as ut}from"./file-saver.b1d07b47.js";import{V as ft}from"./vue-codemirror.0baf4bea.js";import{F as St,G as gt,H as ht}from"./@codemirror.01a039cd.js";import"./lodash-es.032e1c7e.js";import"./@vueuse.4dc5a6bb.js";import"./@element-plus.0246fa1f.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./dayjs.cda24304.js";import"./async-validator.ed4c92a2.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./@floating-ui.1ef3caef.js";import"./vue-uuid.5db441ec.js";import"./colorpicker-v3.adcecff5.js";import"./vue.0ab873a3.js";import"./sortablejs.4530746f.js";import"./codemirror.14d39394.js";import"./@lezer.c02d00a2.js";import"./crelt.67277586.js";import"./style-mod.a2e40363.js";import"./w3c-keyname.86620924.js";var Et=E(z({props:{title:{default:"模块选择"},showCollapse:{type:Boolean}},emits:["unflodOrCollapse"],setup(t,{emit:e}){const o=O("收起"),l=O(!0),a=O(null),i=()=>{l.value?(o.value="展开",l.value=!1,a.value.style.transform="rotate(180deg)"):(o.value="收起",l.value=!0,a.value.style.transform="rotate(0deg)"),e("unflodOrCollapse",l.value)};return(e,n)=>{const r=v,m=s;return B(),W("div",{class:U(["title",{"collapse-center":!l.value}])},[A(R("h1",null,k(t.title),513),[[j,l.value]]),t.showCollapse?(B(),w(m,{key:0,class:"box-item",effect:"dark",content:o.value},{default:D((()=>[R("div",{class:"unfold-collapse-box",onClick:i,ref_key:"switchRef",ref:a},[P(r,{iconName:"icon-shouqi",color:"#00c091",size:"24px"})],512)])),_:1},8,["content"])):J("",!0)],2)}}}),[["__scopeId","data-v-209274e6"]]);const vt={class:"model-list-box"},Tt={class:"model-ul"},Ct=["onClick"],Ft={class:"left"},Lt={class:"right"};var It=E(z({props:{leftShowStatus:null},setup(t){const{resumeJsonStore:e}=T(),o=C(),l=()=>{},a=()=>{};return(i,r)=>{const m=v,p=s,c=n;return B(),W("div",vt,[R("div",Tt,[P(M(at),{list:M(e).LIST,itemKey:"id","ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:l,onEnd:a},{item:D((({element:l,index:a})=>[R("div",{class:U(["model-list-item",{active:M(o).id===l.id},{"collapse-center":!t.leftShowStatus}]),onClick:t=>(t=>{let l=F(`${e.NAME}-${t.model}`),a={model:t.model,optionsName:l,title:t.title,id:t.id};o.setResumeModel(a)})(l)},[R("div",Ft,[R("div",{class:U(["icon-box",{"collapse-size":!t.leftShowStatus}])},[P(p,{class:"box-item",placement:"right",effect:"dark",content:l.title,disabled:t.leftShowStatus},{default:D((()=>[P(m,{iconName:l.iconfont,className:"icon",color:t.leftShowStatus?"#c4c4c4":"#00c091",size:"16px"},null,8,["iconName","color"])])),_:2},1032,["content","disabled"])],2),A(R("p",null,k(l.title),513),[[j,t.leftShowStatus]])]),A(R("div",Lt,[P(c,{modelValue:l.show,"onUpdate:modelValue":t=>l.show=t,size:"small","active-color":"#00C091"},null,8,["modelValue","onUpdate:modelValue"])],512),[[j,t.leftShowStatus]])],10,Ct)])),_:1},8,["list"])])])}}}),[["__scopeId","data-v-c6fe2cfc"]]);var bt=E(z({setup(t){const{resumeJsonStore:e}=T(),o=L(),l=I(e.GLOBAL_STYLE.modelMarginTop),a=O(l),i=t=>{e.GLOBAL_STYLE.modelMarginTop=t+"px",e.LIST.forEach((t=>{t.style.mTop=e.GLOBAL_STYLE.modelMarginTop}))},s=I(e.GLOBAL_STYLE.modelMarginBottom),n=O(s),x=t=>{e.GLOBAL_STYLE.modelMarginBottom=t+"px",e.LIST.forEach((t=>{t.style.mBottom=e.GLOBAL_STYLE.modelMarginBottom}))};return(t,l)=>{const s=r,u=m,f=p,S=V("color-picker"),g=c,h=d;return B(),w(h,{"label-width":"100px","label-position":"left"},{default:D((()=>[P(f,{label:"标题字体大小:"},{default:D((()=>[P(u,{modelValue:M(e).GLOBAL_STYLE.titleFontSize,"onUpdate:modelValue":l[0]||(l[0]=t=>M(e).GLOBAL_STYLE.titleFontSize=t),class:"m-2",placeholder:"Select"},{default:D((()=>[(B(!0),W(G,null,Y(M(o),((t,e)=>(B(),w(s,{key:e,label:t,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),P(f,{label:"主题颜色:"},{default:D((()=>[P(S,{rgba:M(e).GLOBAL_STYLE.titleColor,"onUpdate:rgba":l[1]||(l[1]=t=>M(e).GLOBAL_STYLE.titleColor=t)},null,8,["rgba"])])),_:1}),P(f,{label:"模块上外边距:"},{default:D((()=>[P(g,{modelValue:a.value,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value=t),min:-100,max:100,onChange:i},null,8,["modelValue"])])),_:1}),P(f,{label:"模块下外边距:"},{default:D((()=>[P(g,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=t=>n.value=t),min:-100,max:100,onChange:x},null,8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-92a10e72"]]);let Nt={template1:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#121c26",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:500,textFontWeight:500,textColor:"#7c7b7b",mBottom:"50px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#666",textFontSize:"14px",textFontWeight:600,mBottom:"35px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},GLOBAL_STYLE:{themeColor:"#000",titleColor:"#000",titleFontSize:"20px",modelMarginTop:"0px",modelMarginBottom:"45px"}},template2:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#121c26",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:500,textFontWeight:500,textColor:"#fff",mBottom:"50px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"35px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#fff",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"35px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},GLOBAL_STYLE:{themeColor:"#000",titleColor:"#000",titleFontSize:"20px",modelMarginTop:"0px",modelMarginBottom:"45px"}},template3:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#fff",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:400,textFontWeight:500,textColor:"#757575",mBottom:"40px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"30px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"30px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},GLOBAL_STYLE:{themeColor:"#000",titleColor:"#079cfa",titleFontSize:"20px",modelMarginTop:"0px",modelMarginBottom:"45px"}}},_t={TITLE:"我的简历",LIST:[{model:"RESUME_TITLE",title:"我的简历"},{model:"BASE_INFO",title:"基本资料",name:"小猪课堂",age:25,address:"四川成都",avatar:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",workService:3,phoneNumber:"028-1234321",email:"12322233@qq.com",abstract:"我是一个没有感情的工作机器",degree:"本科"},{model:"JOB_INTENTION",title:"求职意向",intendedPositions:"前端开发工程师",intendedCity:"成都",expectSalary:"8000-10000",jobStatus:"随时入职",jobSearchType:"求职类型"},{model:"EDU_BACKGROUND",title:"教育背景",LIST:[{date:["2015-5","2019-6"],schoolName:"野鸡大学",specialized:"通信工程",degree:"本科",majorCourse:"主修计算机技术、Java、c++等等"}]},{model:"SKILL_SPECIALTIES",title:"技能特长",LIST:[{skillName:"JavaScript",proficiency:"了解",introduce:"熟练掌握该项技术"}]},{model:"CAMPUS_EXPERIENCE",title:"校园经历",LIST:[{date:["2021-9","2022-10"],campusBriefly:"经历简要，如社团名称",campusDuty:"主要职责",campusContent:"经历描述"}]},{model:"INTERNSHIP_EXPERIENCE",title:"实习经验",LIST:[{date:["2021-9","2022-10"],companyName:"业绩公司",posts:"前端开发工程师",jobContent:[{content:"主要工作内容是打杂"}]}]},{model:"WORK_EXPERIENCE",title:"工作经验",LIST:[{date:["2021-9","2022-10"],companyName:"业绩公司",posts:"前端开发工程师",jobContent:[{content:"主要工作内容是打杂"}]}]},{model:"PROJECT_EXPERIENCE",title:"项目经验",LIST:[{date:["2021-9","2022-10"],projectName:"项目名称",posts:"前端开发工程师",projectContent:[{content:"该项目是一个打杂项目"}]}]},{model:"AWARDS",title:"荣誉奖项",LIST:[{date:"2021-9",awardsName:"奖项名称",awardsGrade:"获奖等级"}]},{model:"HOBBIES",title:"兴趣爱好",content:"我喜欢打杂我喜欢打杂我喜欢打杂我喜欢打杂我喜欢打杂我喜欢打杂我喜欢打杂我喜欢打杂"},{model:"SELF_EVALUATION",title:"自我评价",content:"我是一个没有责任感的人"},{model:"WORKS_DISPLAY",title:"作品展示",LIST:[{worksName:"作品名称",worksLink:"https://www.baidu.com",worksIntroduce:"这是一个千万级作品"}]}]};const yt=rt("uuidStore",{state:()=>({refreshUuid:b()}),actions:{setUuid(){this.refreshUuid=b()}}}),zt={class:"code-mirror-box"},Ot={class:"dialog-footer"},Bt=K("关闭"),Wt=z({props:{tipDialogVisible:{type:Boolean,default:!1}},emits:["closeTipDialog"],setup(t,{emit:e}){const o=O(JSON.stringify(_t,null,4)),l=[St(),gt()],a=()=>{e("closeTipDialog")};return(e,i)=>{const s=x,n=u;return B(),w(n,{"model-value":t.tipDialogVisible,width:"40%",title:"示例JSON","show-close":!1,"close-on-click-modal":!1,"append-to-body":"","custom-class":"import-json"},{footer:D((()=>[R("span",Ot,[P(s,{type:"primary",onClick:a},{default:D((()=>[Bt])),_:1})])])),default:D((()=>[R("div",zt,[P(M(ft),{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=t=>o.value=t),ref:"codemirrorRef",placeholder:"请将你的简历JSON写在此处～～",style:{height:"400px"},autofocus:!0,"indent-with-tab":!0,tabSize:2,extensions:l,disabled:!0},null,8,["modelValue"])])])),_:1},8,["model-value"])}}});const At={class:"header"},jt={class:"header-left"},Rt=R("h1",{class:"title"},"请在编辑器内输入简历JSON数据，格式如下：",-1),kt=K(" 注意：示例中的所有字段都需要保留，若无值为空即可，不可删除字段！ "),wt={class:"header-right"},Dt={class:"code-mirror-box"},Pt={class:"dialog-footer"},Jt=K("取消"),Ut=K("确定"),Mt=z({props:{dialogVisible:{type:Boolean,default:!1}},emits:["cancle"],setup(t,{emit:e}){const o=O(JSON.stringify(_t,null,4)),l=[St(),ht,gt()],a=()=>{e("cancle")},n=O(!1),r=()=>{n.value=!0},m=()=>{n.value=!1},p=()=>{o.value=JSON.stringify(_t,null,4),f({message:"重置成功！",type:"success",center:!0})},c=yt(),d=pt(),S=T(),g=C(),h=()=>{if(!o.value)return void f({message:"数据不能为空！",type:"error",center:!0});if(!N(o.value))return void f({message:"JSON格式不正确！",type:"error",center:!0});let t=JSON.parse(o.value);const{id:l,name:a}=d.query;t.ID=l,t.NAME=a;for(let e=0;e<t.LIST.length;e++)for(let o=0;o<_.LIST.length;o++)_.LIST[o].model===t.LIST[e].model&&(t.LIST[e]=i(i({},_.LIST[o]),t.LIST[e]));const s=(t=>{let{resumeJsonStore:e}=T(),o=JSON.parse(JSON.stringify(t));return o.LIST.map(((t,l)=>{t.style||(t.style=Nt[e.NAME][t.model]),o.LIST[l]=t})),o.GLOBAL_STYLE=Nt[e.NAME].GLOBAL_STYLE,o})(t);S.changeResumeJsonData(s),c.setUuid(),g.$reset(),e("cancle")};return(e,i)=>{const c=v,d=s,f=x,S=u;return B(),W(G,null,[P(S,{"model-value":t.dialogVisible,width:"60%","show-close":!1,"close-on-click-modal":!1,"append-to-body":"","custom-class":"import-json"},{title:D((()=>[R("div",At,[R("div",jt,[Rt,R("span",null,[P(c,{iconName:"icon-xianshi_jinggao",color:"red",size:"14px"}),kt])]),R("div",wt,[P(d,{class:"box-item",effect:"dark",content:"JSON示例",placement:"bottom"},{default:D((()=>[R("div",{class:"icon-box",onClick:r},[P(c,{iconName:"icon-daimashili",color:"#fff",size:"17px"})])])),_:1}),P(d,{class:"box-item",effect:"dark",content:"重置",placement:"bottom"},{default:D((()=>[R("div",{class:"icon-box",onClick:p},[P(c,{iconName:"icon-zhongzhi",color:"#fff",size:"17px"})])])),_:1})])])])),footer:D((()=>[R("span",Pt,[P(f,{onClick:a},{default:D((()=>[Jt])),_:1}),P(f,{type:"primary",onClick:h},{default:D((()=>[Ut])),_:1})])])),default:D((()=>[R("div",Dt,[P(M(ft),{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=t=>o.value=t),placeholder:"请将你的简历JSON写在此处～～",style:{height:"400px"},autofocus:!0,"indent-with-tab":!0,tabSize:2,extensions:l},null,8,["modelValue"])])])),_:1},8,["model-value"]),P(Wt,{tipDialogVisible:n.value,onCloseTipDialog:m},null,8,["tipDialogVisible"])],64)}}});const Vt={class:"nav-box"},Yt={class:"nav-center"},Gt={class:"draft-tips"},Kt={class:"nav-right"},Xt=z({emits:["generateReport","reset","saveDataToLocal"],setup(t,{emit:e}){let{resumeJsonStore:o}=mt(T());const l=ct(),a=()=>{l.push({path:"/"})},i=O(null),n=O(!1),r=()=>{n.value=!0,i.value.focus()},m=()=>{n.value=!1};let p=O("");const c=()=>{(()=>{let t=o.value.ID,e={},l=localStorage.getItem("resumeDraft");l?(e=JSON.parse(l),e[t]=o.value):e[t]=o.value,localStorage.setItem("resumeDraft",JSON.stringify(e));const a=lt(new Date).format("YYYY.MM.DD HH:mm:ss");p.value=`已自动保存草稿  ${a}`})(),f({message:"保存本地成功!",type:"success",center:!0})},d=()=>{const t=JSON.stringify(o.value),e=new Blob([t],{type:""});ut.saveAs(e,o.value.TITLE+".json")},x=()=>{e("generateReport")},u=()=>{S.confirm("此操作会重置简历至初始状态，是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{e("reset")})).catch((()=>{}))},E=O(!1),C=()=>{E.value=!0},F=()=>{E.value=!1};return(t,e)=>{const l=V("Edit"),f=g,S=h,T=v,L=s;return B(),W(G,null,[R("nav",Vt,[R("div",{class:"nav-left"},[R("img",{src:xt,alt:"logo",srcset:"",onClick:a}),R("span",{onClick:a},"化简")]),R("div",Yt,[R("span",Gt,k(M(p)),1),A(R("p",null,[K(k(M(o).TITLE)+" ",1),P(f,{size:20,color:"#409eff",onClick:r},{default:D((()=>[P(l)])),_:1})],512),[[j,!n.value]]),A(P(S,{ref_key:"titleIpf",ref:i,modelValue:M(o).TITLE,"onUpdate:modelValue":e[0]||(e[0]=t=>M(o).TITLE=t),autofocus:"",placeholder:"请输入标题",onBlur:m},null,8,["modelValue"]),[[j,n.value]])]),R("div",Kt,[P(L,{class:"box-item",effect:"dark",content:"保存草稿",placement:"bottom"},{default:D((()=>[R("div",{class:"icon-box",onClick:c},[P(T,{iconName:"icon-caogaoxiang1",color:"#fff",size:"17px"})])])),_:1}),P(L,{class:"box-item",effect:"dark",content:"导出为PDF",placement:"bottom"},{default:D((()=>[R("div",{class:"icon-box",onClick:x},[P(T,{iconName:"icon-pdf",color:"#fff",size:"17px"})])])),_:1}),P(L,{class:"box-item",effect:"dark",content:"导出为JSON数据",placement:"bottom"},{default:D((()=>[R("div",{class:"icon-box",onClick:d},[P(T,{iconName:"icon-xiazai",color:"#fff",size:"17px"})])])),_:1}),P(L,{class:"box-item",effect:"dark",content:"导入JSON数据",placement:"bottom"},{default:D((()=>[R("div",{class:"icon-box",onClick:C},[P(T,{iconName:"icon-yunduanshangchuan",color:"#fff",size:"19px"})])])),_:1}),P(L,{class:"box-item",effect:"dark",content:"重置所有设置",placement:"bottom"},{default:D((()=>[R("div",{class:"icon-box",onClick:u},[P(T,{iconName:"icon-zhongzhi",color:"#fff",size:"17px"})])])),_:1})])]),P(Mt,{dialogVisible:E.value,onCancle:F},null,8,["dialogVisible"])],64)}}});const Ht={class:"design-box"},$t={class:"bottom"},qt=(t=>(et("data-v-ca6c75c8"),t=t(),ot(),t))((()=>R("p",{class:"tips"},"如果分割线遮挡内容，请通过调整模块上下边距以显示内容！",-1))),Qt={class:"page"};var Zt=E(z({setup(t){y(1500);const{title:e}=mt(C()),o=T(),l=yt();let{resumeJsonStore:a}=mt(T());const i=t=>{let e=JSON.parse(JSON.stringify(t));return e.LIST.map(((t,o)=>{t.style||(t.style=Nt[a.value.NAME][t.model]),e.LIST[o]=t})),e},s=()=>{_.ID=m,_.NAME=p,_.GLOBAL_STYLE=Nt[a.value.NAME].GLOBAL_STYLE;let t=i(_);o.changeResumeJsonData(t)},n=localStorage.getItem("resumeDraft"),r=pt(),{id:m,name:p}=r.query;a.value.ID=m,a.value.NAME=p;const c=O(p);if(n){let t=JSON.parse(n)[m];t?(t=i(t),o.changeResumeJsonData(t)):s()}else s();if(2==Number(m)){let t=[];a.value.LIST.forEach((e=>{"RESUME_TITLE"==e.model&&(e.show=!1),t.push(e)})),a.value.LIST=t}X((async()=>{b(),z()})),H((()=>{null==F||F.disconnect()})),$((()=>{g=[]}));let d=O("");const x=it.exports.debounce((()=>{(()=>{let t=a.value.ID,e={},o=localStorage.getItem("resumeDraft");o?(e=JSON.parse(o),e[t]=a.value):e[t]=a.value,localStorage.setItem("resumeDraft",JSON.stringify(e));const l=lt(new Date).format("YYYY.MM.DD HH:mm:ss");d.value=`已自动保存草稿  ${l}`})()}),1e3);q(a.value,(()=>{x()}),{deep:!0});const u=C(),f=()=>{u.$reset()},S=O(null);let g=[];const h=()=>{s(),f();let t=localStorage.getItem("resumeDraft");if(t){let e=JSON.parse(t);Object.keys(e).length>1?e[m]&&(delete e[m],localStorage.setItem("resumeDraft",JSON.stringify(e))):localStorage.removeItem("resumeDraft")}l.setUuid()},E=async()=>{let t=I.value;I.value=0,u.$reset(),await Z(),((t,e,o,l)=>{let a=t.offsetWidth,i=t.offsetHeight,s=t.offsetTop,n=t.offsetLeft,r=document.createElement("canvas"),m=0,p=document.documentElement.clientWidth||document.body.clientWidth,c=window.innerWidth;c>p&&(m=(c-p)/2),r.width=2*a,r.height=2*i;let d=r.getContext("2d");d.scale(2,2),d.translate(-n-m,-s),st(t,{scale:2,useCORS:!0,logging:!1}).then((t=>{let a=t.width,i=t.height,s=a/592.28*841.89,n=i,r=0,m=595.28,p=595.28/a*i,c=t.toDataURL("image/jpeg",1),d=new nt("","pt","a4");if(n<s)d.addImage(c,"JPEG",0,0,m,p);else for(;n>0;)d.addImage(c,"JPEG",0,r,m,p),n-=s,r-=841.89,n>0&&d.addPage();if(o){let t=d.output("datauristring");l(t)}else d.save(e),l()}))})(S.value,a.value.TITLE,!1,(()=>{I.value=t}))},v=O(null);let F=null,L=0,I=O(0);const b=()=>{F=new ResizeObserver((async t=>{for(let e of t)L=e.target.offsetHeight,I.value=Math.ceil(L/1160),S.value.style.height=1160*I.value+"px",v.value.style.height=S.value.style.height})),F.observe(v.value)},N=t=>{v.value.style.height=t+"px"},z=()=>{window.addEventListener("click",A)},A=t=>{j(v.value,t.target)&&f()},j=(t,e)=>!(!t||t===document)&&(t===e||j(t.parentNode,e));H((()=>{window.removeEventListener("click",A)}));const U=O(null),V=O(!0),K=t=>{t?(setTimeout((()=>{V.value=t}),100),U.value.style.width="300px"):(setTimeout((()=>{V.value=t}),100),U.value.style.width="70px")};return(t,o)=>(B(),W("div",Ht,[P(Xt,{onGenerateReport:E,onReset:h}),R("div",$t,[R("div",{class:"left",ref_key:"leftRef",ref:U},[P(M(dt.exports.CScrollbar),{trigger:"hover",hThumbStyle:{"background-color":"rgba(0,0,0,0.4)"}},{default:D((()=>[P(Et,{onUnflodOrCollapse:K,showCollapse:""}),(B(),w(It,{leftShowStatus:V.value,key:M(l).refreshUuid},null,8,["leftShowStatus"]))])),_:1},8,["hThumbStyle"])],512),(B(),W("div",{class:"center",key:M(l).refreshUuid},[R("div",{class:"design",ref_key:"html2Pdf",ref:S},[R("div",{class:"design-content",ref_key:"htmlContentPdf",ref:v},[(B(),w(Q(c.value),{onContentHeightChange:N}))],512),M(I)>0?(B(!0),W(G,{key:0},Y(M(I),((t,e)=>(B(),W("div",{class:"lines",ref_for:!0,ref:t=>((t,e)=>{t&&(I.value===e+1&&(t.style.top=1160*I.value+"px"),g.push(t))})(t,e),style:tt({top:1128+1132*e+"px"})},[qt,R("p",Qt,k(e+1)+"/"+k(M(I)),1)],4)))),256)):J("",!0)],512)])),(B(),W("div",{class:"config",key:M(l).refreshUuid},[P(Et,{title:M(e)},null,8,["title"]),M(u).model?(B(),w(Q(M(u).optionsName),{key:M(u).id})):(B(),w(bt,{key:1}))]))])]))}}),[["__scopeId","data-v-ca6c75c8"]]);export{Zt as default};
