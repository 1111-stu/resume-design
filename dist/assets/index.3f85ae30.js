import{d as t,o as e,c as o,a as l,y as a,a4 as i,_ as s,X as n,A as r,u as p,e as m,W as x,t as c,F as u,j as d,Q as f,ak as g,f as h,p as v,Y as S,x as E,Z as T,z as F,n as C,q as I,B as _,C as N}from"./@vue.2f07ec52.js";import{_ as O,P as W}from"./PreviewImage.301fb2e3.js";import{_ as b,u as z,a as y,b as L,c as j,p as R,T as B}from"./index.27d4d60a.js";import{h as D}from"./moment.17f8281e.js";import{d as A}from"./vuedraggable.7f0566f4.js";import{l as M}from"./lodash.9a4b4219.js";import{h as P}from"./html2canvas.c4a43e03.js";import{J as k}from"./jspdf.1d58ee56.js";import{s as J}from"./pinia.144cc524.js";import{u as w,b as U}from"./vue-router.1fa85672.js";import{d as V}from"./c-scrollbar.409fc4e1.js";import{s as G}from"./vue3-pdfjs.21d748aa.js";import"./element-plus.bc463900.js";import"./lodash-es.032e1c7e.js";import"./@vueuse.7ecd16a9.js";import"./@element-plus.21c32065.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./dayjs.0371a6c7.js";import"./async-validator.ed4c92a2.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./@floating-ui.1ef3caef.js";import"./vue-uuid.5db441ec.js";import"./colorpicker-v3.9786f840.js";import"./pdfjs-dist.207706dd.js";import"./dommatrix.4ee1d507.js";import"./web-streams-polyfill.e202f7fa.js";import"./vue.c7f6a9e2.js";import"./sortablejs.fbe5cdec.js";const K={class:"title"};var X=b(t({props:{title:{default:"模块选择"}},setup:t=>(i,s)=>(e(),o("div",K,[l("h1",null,a(t.title),1)]))}),[["__scopeId","data-v-6d5f1d98"]]);const H={class:"model-list-box"},Y={class:"model-ul"},$=["onClick"],Z={class:"left"},q={class:"icon-box"},Q={class:"right"};var tt=b(t({setup(t){const{resumeJsonStore:m}=z(),x=y(),c=()=>{},u=()=>{};return(t,d)=>{const f=i("svg-icon"),g=i("el-switch");return e(),o("div",H,[l("div",Y,[s(p(A),{list:p(m).LIST,itemKey:"id","ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:c,onEnd:u},{item:n((({element:t,index:e})=>[l("div",{class:r(["model-list-item",{active:p(x).id===t.id}]),onClick:e=>(t=>{let e=L(`${m.NAME}-${t.model}`),o={model:t.model,optionsName:e,title:t.title,id:t.id};x.setResumeModel(o)})(t)},[l("div",Z,[l("div",q,[s(f,{iconName:t.iconfont,className:"icon",color:"#c4c4c4",size:"16px"},null,8,["iconName"])]),l("p",null,a(t.title),1)]),l("div",Q,[s(g,{modelValue:t.show,"onUpdate:modelValue":e=>t.show=e,size:"small","active-color":"#00C091"},null,8,["modelValue","onUpdate:modelValue"])])],10,$)])),_:1},8,["list"])])])}}}),[["__scopeId","data-v-64cfa209"]]);var et=b(t({setup(t){const{resumeJsonStore:l}=z(),a=j(),r=R(l.MODEL_MARGIN_TOP),d=m(r),f=t=>{l.MODEL_MARGIN_TOP=t+"px",l.LIST.forEach((t=>{t.style.mTop=l.MODEL_MARGIN_TOP}))},g=R(l.MODEL_MARGIN_BOTTOM),h=m(g),v=t=>{l.MODEL_MARGIN_BOTTOM=t+"px",l.LIST.forEach((t=>{t.style.mBottom=l.MODEL_MARGIN_BOTTOM}))};return(t,r)=>{const m=i("el-option"),g=i("el-select"),S=i("el-form-item"),E=i("color-picker"),T=i("el-input-number"),F=i("el-form");return e(),x(F,{"label-width":"100px","label-position":"left"},{default:n((()=>[s(S,{label:"标题字体大小:"},{default:n((()=>[s(g,{modelValue:p(l).TITLE_FONT_SIZE,"onUpdate:modelValue":r[0]||(r[0]=t=>p(l).TITLE_FONT_SIZE=t),class:"m-2",placeholder:"Select"},{default:n((()=>[(e(!0),o(u,null,c(p(a),((t,o)=>(e(),x(m,{key:o,label:t,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(S,{label:"标题字体颜色:"},{default:n((()=>[s(E,{rgba:p(l).TITLE_COLOR,"onUpdate:rgba":r[1]||(r[1]=t=>p(l).TITLE_COLOR=t)},null,8,["rgba"])])),_:1}),s(S,{label:"模块上外边距:"},{default:n((()=>[s(T,{modelValue:d.value,"onUpdate:modelValue":r[2]||(r[2]=t=>d.value=t),min:-100,max:100,onChange:f},null,8,["modelValue"])])),_:1}),s(S,{label:"模块下外边距:"},{default:n((()=>[s(T,{modelValue:h.value,"onUpdate:modelValue":r[3]||(r[3]=t=>h.value=t),min:-100,max:100,onChange:v},null,8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-b243ada4"]]);let ot={template1:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#121c26",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:500,textFontWeight:500,textColor:"#7c7b7b",mBottom:"50px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#666",textFontSize:"14px",textFontWeight:600,mBottom:"35px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"}},template2:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#121c26",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:500,textFontWeight:500,textColor:"#fff",mBottom:"50px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"35px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#fff",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"35px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"}}};const lt=t=>(_("data-v-54069f1e"),t=t(),N(),t),at={class:"design-box"},it={class:"nav-box"},st={class:"nav-center"},nt={class:"draft-tips"},rt={class:"nav-right"},pt=E("全局样式设置"),mt=E("保存草稿"),xt=E("导出PDF"),ct=E("重置"),ut={class:"bottom"},dt={class:"left"},ft={class:"center"},gt=lt((()=>l("p",{class:"tips"},"如果分割线遮挡内容，请通过调整模块上下边距以显示内容！",-1))),ht={class:"page"},vt={class:"config"};var St=b(t({setup(t){const{title:r}=J(y()),_=z();let{resumeJsonStore:N}=J(z());const b=t=>{let e=JSON.parse(JSON.stringify(t));return e.LIST.map(((t,o)=>{t.style||(t.style=ot[N.value.NAME][t.model]),e.LIST[o]=t})),e},L=localStorage.getItem("resumeDraft"),j=w(),{id:R,name:A}=j.query;N.value.ID=R,N.value.NAME=A;const K=m(A);if(L){let t=JSON.parse(L)[R];if(t)t=b(t),_.changeResumeJsonData(t);else{B.ID=R,B.NAME=A;let t=b(B);_.changeResumeJsonData(t)}}else{B.ID=R,B.NAME=A;let t=b(B);_.changeResumeJsonData(t)}if(2==Number(R)){let t=[];N.value.LIST.forEach((e=>{"RESUME_TITLE"==e.model&&(e.show=!1),t.push(e)})),N.value.LIST=t}const H=U(),Y=()=>{H.push({path:"/"})},$=m(null),Z=m(!1),q=()=>{Z.value=!0,$.value.focus()},Q=()=>{Z.value=!1};d((async()=>{Dt(),Mt()})),f((()=>{null==jt||jt.disconnect()})),g((()=>{_t=[]}));let lt=m("");const St=()=>{let t=N.value.ID,e={},o=localStorage.getItem("resumeDraft");o?(e=JSON.parse(o),e[t]=N.value):e[t]=N.value,localStorage.setItem("resumeDraft",JSON.stringify(e));const l=D(new Date).format("YYYY.MM.DD HH:mm:ss");lt.value=`已自动保存草稿  ${l}`},Et=M.exports.debounce((()=>{St()}),1e3);h(N.value,(()=>{Et()}),{deep:!0});const Tt=y(),Ft=()=>{localStorage.clear(),Tt.$reset()},Ct=()=>{St()},It=m(null);let _t=[];const Nt=()=>{let t=b(B);_.changeResumeJsonData(t);let e=localStorage.getItem("resumeDraft");if(e){let t=JSON.parse(e);Object.keys(t).length>1?t[R]&&(delete t[R],localStorage.setItem("resumeDraft",JSON.stringify(t))):localStorage.removeItem("resumeDraft")}location.reload()},Ot=async()=>{let t=Bt.value;Bt.value=0,Tt.$reset(),await C(),((t,e,o,l)=>{let a=t.offsetWidth,i=t.offsetHeight,s=t.offsetTop,n=t.offsetLeft,r=document.createElement("canvas"),p=0,m=document.documentElement.clientWidth||document.body.clientWidth,x=window.innerWidth;x>m&&(p=(x-m)/2),r.width=2*a,r.height=2*i;let c=r.getContext("2d");c.scale(2,2),c.translate(-n-p,-s),P(t,{scale:2,useCORS:!0,logging:!1}).then((t=>{let a=t.width,i=t.height,s=a/592.28*841.89,n=i,r=0,p=595.28,m=595.28/a*i,x=t.toDataURL("image/jpeg",1),c=new k("","pt","a4");if(n<s)c.addImage(x,"JPEG",0,0,p,m);else for(;n>0;)c.addImage(x,"JPEG",0,r,p,m),n-=s,r-=841.89,n>0&&c.addPage();if(o){let t=c.output("datauristring");l(t)}else c.save(e),l()}))})(It.value,"个人简历",!1,(()=>{Bt.value=t}))},Wt=m(""),bt=m(0),zt=m(!1),yt=()=>{zt.value=!1},Lt=m(null);let jt=null,Rt=0,Bt=m(0);const Dt=()=>{jt=new ResizeObserver((async t=>{for(let e of t)Rt=e.target.offsetHeight,Bt.value=Math.ceil(Rt/1160),It.value.style.height=1160*Bt.value+"px",Lt.value.style.height=It.value.style.height})),jt.observe(Lt.value)},At=t=>{Lt.value.style.height=t+"px"},Mt=()=>{window.addEventListener("click",Pt)},Pt=t=>{kt(Lt.value,t.target)&&Ft()},kt=(t,e)=>!(!t||t===document)&&(t===e||kt(t.parentNode,e));return f((()=>{window.removeEventListener("click",Pt)})),(t,m)=>{const d=i("Edit"),f=i("el-icon"),g=i("el-input"),h=i("el-button"),C=i("el-popconfirm");return e(),o(u,null,[l("div",at,[l("nav",it,[l("div",{class:"nav-left"},[l("img",{src:O,alt:"logo",srcset:"",onClick:Y}),l("span",{onClick:Y},"化简")]),l("div",st,[l("span",nt,a(p(lt)),1),v(l("p",null,[E(a(p(N).TITLE)+" ",1),s(f,{size:20,color:"#409eff",onClick:q},{default:n((()=>[s(d)])),_:1})],512),[[S,!Z.value]]),v(s(g,{ref_key:"titleIpf",ref:$,modelValue:p(N).TITLE,"onUpdate:modelValue":m[0]||(m[0]=t=>p(N).TITLE=t),autofocus:"",placeholder:"请输入标题",onBlur:Q},null,8,["modelValue"]),[[S,Z.value]])]),l("div",rt,[s(h,{type:"primary",onClick:Ft},{default:n((()=>[pt])),_:1}),s(h,{type:"primary",onClick:Ct},{default:n((()=>[mt])),_:1}),s(h,{type:"primary",onClick:Ot},{default:n((()=>[xt])),_:1}),s(C,{title:"重置会删除所有已编辑内容，是否继续?",onConfirm:Nt,confirmButtonText:"确定",cancelButtonText:"取消"},{reference:n((()=>[s(h,{type:"primary"},{default:n((()=>[ct])),_:1})])),_:1})])]),l("div",ut,[l("div",dt,[s(p(V.exports.CScrollbar),{trigger:"hover",hThumbStyle:{"background-color":"rgba(0,0,0,0.4)"}},{default:n((()=>[s(X),s(tt)])),_:1},8,["hThumbStyle"])]),l("div",ft,[l("div",{class:"design",ref_key:"html2Pdf",ref:It},[l("div",{class:"design-content",ref_key:"htmlContentPdf",ref:Lt},[(e(),x(T(K.value),{onContentHeightChange:At}))],512),p(Bt)>0?(e(!0),o(u,{key:0},c(p(Bt),((t,i)=>(e(),o("div",{class:"lines",ref_for:!0,ref:t=>((t,e)=>{t&&(Bt.value===e+1&&(t.style.top=1160*Bt.value+"px"),_t.push(t))})(t,i),style:I({top:1128+1132*i+"px"})},[gt,l("p",ht,a(i+1)+"/"+a(p(Bt)),1)],4)))),256)):F("",!0)],512)]),l("div",vt,[s(X,{title:p(r)},null,8,["title"]),p(Tt).model?(e(),x(T(p(Tt).optionsName),{key:p(Tt).id})):(e(),x(et,{key:1}))])])]),v(s(W,{onClose:yt},{default:n((()=>[(e(!0),o(u,null,c(bt.value,(t=>(e(),x(p(G),{key:t,src:Wt.value,page:t,scale:.5},null,8,["src","page","scale"])))),128))])),_:1},512),[[S,zt.value]])],64)}}}),[["__scopeId","data-v-54069f1e"]]);export{St as default};
