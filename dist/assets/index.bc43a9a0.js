import{a as t,j as e,d as o,e as l,c as a,f as i,g as s,k as n,i as p,o as r,s as m,n as x}from"./element-plus.c35751cb.js";import{d as c,e as u,o as d,c as S,m as f,Y as g,a as h,x as F,W as E,X as C,_ as v,y as T,z as L,u as _,a4 as I,q as B,F as z,j as W,Q as N,ak as O,f as b,t as y,Z as A,n as R,p as j,A as k,B as w}from"./@vue.400cde23.js";import{_ as P}from"./logo.9e1f78c9.js";import{_ as D,a as M,u as U,b as J,c as Y,d as G,p as V,o as K,g as X,T as H}from"./index.9c218d2d.js";import{h as $}from"./moment.17f8281e.js";import{d as q}from"./vuedraggable.9e9ac958.js";import{l as Q}from"./lodash.e0473d21.js";import{h as Z}from"./html2canvas.c4a43e03.js";import{J as tt}from"./jspdf.76187c9d.js";import{s as et}from"./pinia.6cef6b80.js";import{u as ot,b as lt}from"./vue-router.a9498a4b.js";import{d as at}from"./c-scrollbar.f0ced9d1.js";import{F as it}from"./file-saver.b1d07b47.js";import"./lodash-es.032e1c7e.js";import"./@vueuse.4dc5a6bb.js";import"./@element-plus.0246fa1f.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./dayjs.cda24304.js";import"./async-validator.ed4c92a2.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./@floating-ui.1ef3caef.js";import"./vue-uuid.5db441ec.js";import"./colorpicker-v3.adcecff5.js";import"./vue.0ab873a3.js";import"./sortablejs.4530746f.js";var st=D(c({props:{title:{default:"模块选择"},showCollapse:{type:Boolean}},emits:["unflodOrCollapse"],setup(e,{emit:o}){const l=u("收起"),a=u(!0),i=u(null),s=()=>{a.value?(l.value="展开",a.value=!1,i.value.style.transform="rotate(180deg)"):(l.value="收起",a.value=!0,i.value.style.transform="rotate(0deg)"),o("unflodOrCollapse",a.value)};return(o,n)=>{const p=M,r=t;return d(),S("div",{class:L(["title",{"collapse-center":!a.value}])},[f(h("h1",null,F(e.title),513),[[g,a.value]]),e.showCollapse?(d(),E(r,{key:0,class:"box-item",effect:"dark",content:l.value},{default:C((()=>[h("div",{class:"unfold-collapse-box",onClick:s,ref_key:"switchRef",ref:i},[v(p,{iconName:"icon-shouqi",color:"#00c091",size:"24px"})],512)])),_:1},8,["content"])):T("",!0)],2)}}}),[["__scopeId","data-v-209274e6"]]);const nt={class:"model-list-box"},pt={class:"model-ul"},rt=["onClick"],mt={class:"left"},xt={class:"right"};var ct=D(c({props:{leftShowStatus:null},setup(o){const{resumeJsonStore:l}=U(),a=J(),i=()=>{},s=()=>{};return(n,p)=>{const r=M,m=t,x=e;return d(),S("div",nt,[h("div",pt,[v(_(q),{list:_(l).LIST,itemKey:"id","ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:i,onEnd:s},{item:C((({element:t,index:e})=>[h("div",{class:L(["model-list-item",{active:_(a).id===t.id},{"collapse-center":!o.leftShowStatus}]),onClick:e=>(t=>{let e=Y(`${l.NAME}-${t.model}`),o={model:t.model,optionsName:e,title:t.title,id:t.id};a.setResumeModel(o)})(t)},[h("div",mt,[h("div",{class:L(["icon-box",{"collapse-size":!o.leftShowStatus}])},[v(m,{class:"box-item",placement:"right",effect:"dark",content:t.title,disabled:o.leftShowStatus},{default:C((()=>[v(r,{iconName:t.iconfont,className:"icon",color:o.leftShowStatus?"#c4c4c4":"#00c091",size:"16px"},null,8,["iconName","color"])])),_:2},1032,["content","disabled"])],2),f(h("p",null,F(t.title),513),[[g,o.leftShowStatus]])]),f(h("div",xt,[v(x,{modelValue:t.show,"onUpdate:modelValue":e=>t.show=e,size:"small","active-color":"#00C091"},null,8,["modelValue","onUpdate:modelValue"])],512),[[g,o.leftShowStatus]])],10,rt)])),_:1},8,["list"])])])}}}),[["__scopeId","data-v-c6fe2cfc"]]);var ut=D(c({setup(t){const{resumeJsonStore:e}=U(),n=G(),p=V(e.GLOBAL_STYLE.modelMarginTop),r=u(p),m=t=>{e.GLOBAL_STYLE.modelMarginTop=t+"px",e.LIST.forEach((t=>{t.style.mTop=e.GLOBAL_STYLE.modelMarginTop}))},x=V(e.GLOBAL_STYLE.modelMarginBottom),c=u(x),f=t=>{e.GLOBAL_STYLE.modelMarginBottom=t+"px",e.LIST.forEach((t=>{t.style.mBottom=e.GLOBAL_STYLE.modelMarginBottom}))};return(t,p)=>{const x=o,u=l,g=a,h=I("color-picker"),F=i,T=s;return d(),E(T,{"label-width":"100px","label-position":"left"},{default:C((()=>[v(g,{label:"标题字体大小:"},{default:C((()=>[v(u,{modelValue:_(e).GLOBAL_STYLE.titleFontSize,"onUpdate:modelValue":p[0]||(p[0]=t=>_(e).GLOBAL_STYLE.titleFontSize=t),class:"m-2",placeholder:"Select"},{default:C((()=>[(d(!0),S(z,null,B(_(n),((t,e)=>(d(),E(x,{key:e,label:t,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),v(g,{label:"主题颜色:"},{default:C((()=>[v(h,{rgba:_(e).GLOBAL_STYLE.titleColor,"onUpdate:rgba":p[1]||(p[1]=t=>_(e).GLOBAL_STYLE.titleColor=t)},null,8,["rgba"])])),_:1}),v(g,{label:"模块上外边距:"},{default:C((()=>[v(F,{modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=t=>r.value=t),min:-100,max:100,onChange:m},null,8,["modelValue"])])),_:1}),v(g,{label:"模块下外边距:"},{default:C((()=>[v(F,{modelValue:c.value,"onUpdate:modelValue":p[3]||(p[3]=t=>c.value=t),min:-100,max:100,onChange:f},null,8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-92a10e72"]]);let dt={template1:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#121c26",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:500,textFontWeight:500,textColor:"#7c7b7b",mBottom:"50px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#666",textFontSize:"14px",textFontWeight:600,mBottom:"35px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},GLOBAL_STYLE:{themeColor:"#000",titleColor:"#000",titleFontSize:"20px",modelMarginTop:"0px",modelMarginBottom:"45px"}},template2:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#121c26",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:500,textFontWeight:500,textColor:"#fff",mBottom:"50px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"35px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#fff",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"35px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"35px",mTop:"0px"},GLOBAL_STYLE:{themeColor:"#000",titleColor:"#000",titleFontSize:"20px",modelMarginTop:"0px",modelMarginBottom:"45px"}},template3:{RESUME_TITLE:{textColor:"#fff",textFontSize:"16px",textFontWeight:600,backgroundColor:"#000",mBottom:"35px",mTop:"15px"},BASE_INFO:{titleColor:"#fff",titleFontSize:"30px",textFontSize:"14px",titleFontWeight:400,textFontWeight:500,textColor:"#757575",mBottom:"40px",mTop:"0px"},JOB_INTENTION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},EDU_BACKGROUND:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"30px",mTop:"0px"},SKILL_SPECIALTIES:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},CAMPUS_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},INTERNSHIP_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},WORK_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},PROJECT_EXPERIENCE:{titleColor:"#666",titleFontSize:"14px",titleFontWeight:600,textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},AWARDS:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,titleColor:"#666666",titleFontSize:"14px",titleFontWeight:600,mBottom:"30px",mTop:"0px"},SELF_EVALUATION:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},WORKS_DISPLAY:{textColor:"#757575",textFontSize:"14px",textFontWeight:500,mBottom:"30px",mTop:"0px"},GLOBAL_STYLE:{themeColor:"#000",titleColor:"#079cfa",titleFontSize:"20px",modelMarginTop:"0px",modelMarginBottom:"45px"}}};const St=t=>(k("data-v-1fd0cf4a"),t=t(),w(),t),ft={class:"design-box"},gt={class:"nav-box"},ht={class:"nav-center"},Ft={class:"draft-tips"},Et={class:"nav-right"},Ct=y("保存草稿"),vt=y("导出PDF"),Tt=y("导出JSON数据"),Lt=y("重置"),_t={class:"bottom"},It={class:"center"},Bt=St((()=>h("p",{class:"tips"},"如果分割线遮挡内容，请通过调整模块上下边距以显示内容！",-1))),zt={class:"page"};var Wt=D(c({setup(t){K(1500);const{title:e}=et(J()),o=U();let{resumeJsonStore:l}=et(U());const a=t=>{let e=JSON.parse(JSON.stringify(t));return e.LIST.map(((t,o)=>{t.style||(t.style=dt[l.value.NAME][t.model]),e.LIST[o]=t})),e},i=()=>{H.ID=L,H.NAME=k,H.GLOBAL_STYLE=dt[l.value.NAME].GLOBAL_STYLE;let t=a(H);o.changeResumeJsonData(t)},s=localStorage.getItem("resumeDraft"),c=ot(),{id:L,name:k}=c.query;l.value.ID=L,l.value.NAME=k;const w=u(k);if(s){let t=JSON.parse(s)[L];t?(t=a(t),o.changeResumeJsonData(t)):i()}else i();if(2==Number(L)){let t=[];l.value.LIST.forEach((e=>{"RESUME_TITLE"==e.model&&(e.show=!1),t.push(e)})),l.value.LIST=t}const D=lt(),M=()=>{D.push({path:"/"})},Y=u(null),G=u(!1),V=()=>{G.value=!0,Y.value.focus()},q=()=>{G.value=!1};u(!0),W((async()=>{Pt(),Mt()})),N((()=>{null==jt||jt.disconnect()})),O((()=>{Nt=[]}));let nt=u("");const pt=()=>{let t=l.value.ID,e={},o=localStorage.getItem("resumeDraft");o?(e=JSON.parse(o),e[t]=l.value):e[t]=l.value,localStorage.setItem("resumeDraft",JSON.stringify(e));const a=$(new Date).format("YYYY.MM.DD HH:mm:ss");nt.value=`已自动保存草稿  ${a}`},rt=Q.exports.debounce((()=>{pt()}),1e3);b(l.value,(()=>{rt()}),{deep:!0});const mt=J(),xt=()=>{mt.$reset()},St=()=>{pt(),x({message:"保存本地成功!",type:"success",center:!0})},Wt=u(null);let Nt=[];const Ot=u(X()),bt=()=>{i(),xt();let t=localStorage.getItem("resumeDraft");if(t){let e=JSON.parse(t);Object.keys(e).length>1?e[L]&&(delete e[L],localStorage.setItem("resumeDraft",JSON.stringify(e))):localStorage.removeItem("resumeDraft")}Ot.value=X()},yt=async()=>{let t=wt.value;wt.value=0,mt.$reset(),await R(),((t,e,o,l)=>{let a=t.offsetWidth,i=t.offsetHeight,s=t.offsetTop,n=t.offsetLeft,p=document.createElement("canvas"),r=0,m=document.documentElement.clientWidth||document.body.clientWidth,x=window.innerWidth;x>m&&(r=(x-m)/2),p.width=2*a,p.height=2*i;let c=p.getContext("2d");c.scale(2,2),c.translate(-n-r,-s),Z(t,{scale:2,useCORS:!0,logging:!1}).then((t=>{let a=t.width,i=t.height,s=a/592.28*841.89,n=i,p=0,r=595.28,m=595.28/a*i,x=t.toDataURL("image/jpeg",1),c=new tt("","pt","a4");if(n<s)c.addImage(x,"JPEG",0,0,r,m);else for(;n>0;)c.addImage(x,"JPEG",0,p,r,m),n-=s,p-=841.89,n>0&&c.addPage();if(o){let t=c.output("datauristring");l(t)}else c.save(e),l()}))})(Wt.value,l.value.TITLE,!1,(()=>{wt.value=t}))},At=()=>{const t=JSON.stringify(l.value),e=new Blob([t],{type:""});it.saveAs(e,l.value.TITLE+".json")},Rt=u(null);let jt=null,kt=0,wt=u(0);const Pt=()=>{jt=new ResizeObserver((async t=>{for(let e of t)kt=e.target.offsetHeight,wt.value=Math.ceil(kt/1160),Wt.value.style.height=1160*wt.value+"px",Rt.value.style.height=Wt.value.style.height})),jt.observe(Rt.value)},Dt=t=>{Rt.value.style.height=t+"px"},Mt=()=>{window.addEventListener("click",Ut)},Ut=t=>{Jt(Rt.value,t.target)&&xt()},Jt=(t,e)=>!(!t||t===document)&&(t===e||Jt(t.parentNode,e));N((()=>{window.removeEventListener("click",Ut)}));const Yt=u(null),Gt=u(!0),Vt=t=>{t?(setTimeout((()=>{Gt.value=t}),100),Yt.value.style.width="300px"):(setTimeout((()=>{Gt.value=t}),100),Yt.value.style.width="70px")};return(t,o)=>{const a=I("Edit"),i=n,s=p,x=r,c=m;return d(),S("div",ft,[h("nav",gt,[h("div",{class:"nav-left"},[h("img",{src:P,alt:"logo",srcset:"",onClick:M}),h("span",{onClick:M},"化简")]),h("div",ht,[h("span",Ft,F(_(nt)),1),f(h("p",null,[y(F(_(l).TITLE)+" ",1),v(i,{size:20,color:"#409eff",onClick:V},{default:C((()=>[v(a)])),_:1})],512),[[g,!G.value]]),f(v(s,{ref_key:"titleIpf",ref:Y,modelValue:_(l).TITLE,"onUpdate:modelValue":o[0]||(o[0]=t=>_(l).TITLE=t),autofocus:"",placeholder:"请输入标题",onBlur:q},null,8,["modelValue"]),[[g,G.value]])]),h("div",Et,[v(x,{type:"primary",onClick:St},{default:C((()=>[Ct])),_:1}),v(x,{type:"primary",onClick:yt},{default:C((()=>[vt])),_:1}),v(x,{type:"primary",onClick:At},{default:C((()=>[Tt])),_:1}),v(c,{title:"重置会删除所有已编辑内容，是否继续?",onConfirm:bt,confirmButtonText:"确定",cancelButtonText:"取消"},{reference:C((()=>[v(x,{type:"primary"},{default:C((()=>[Lt])),_:1})])),_:1})])]),h("div",_t,[h("div",{class:"left",ref_key:"leftRef",ref:Yt},[v(_(at.exports.CScrollbar),{trigger:"hover",hThumbStyle:{"background-color":"rgba(0,0,0,0.4)"}},{default:C((()=>[v(st,{onUnflodOrCollapse:Vt,showCollapse:""}),(d(),E(ct,{leftShowStatus:Gt.value,key:Ot.value},null,8,["leftShowStatus"]))])),_:1},8,["hThumbStyle"])],512),h("div",It,[h("div",{class:"design",ref_key:"html2Pdf",ref:Wt},[h("div",{class:"design-content",ref_key:"htmlContentPdf",ref:Rt},[(d(),E(A(w.value),{onContentHeightChange:Dt}))],512),_(wt)>0?(d(!0),S(z,{key:0},B(_(wt),((t,e)=>(d(),S("div",{class:"lines",ref_for:!0,ref:t=>((t,e)=>{t&&(wt.value===e+1&&(t.style.top=1160*wt.value+"px"),Nt.push(t))})(t,e),style:j({top:1128+1132*e+"px"})},[Bt,h("p",zt,F(e+1)+"/"+F(_(wt)),1)],4)))),256)):T("",!0)],512)]),(d(),S("div",{class:"config",key:Ot.value},[v(st,{title:_(e)},null,8,["title"]),_(mt).model?(d(),E(A(_(mt).optionsName),{key:_(mt).id})):(d(),E(ut,{key:1}))]))])])}}}),[["__scopeId","data-v-1fd0cf4a"]]);export{Wt as default};
